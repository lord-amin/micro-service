<!doctype html>
<html>
<head>
    <title></title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" />
    <link href="https://cdn.rawgit.com/rastikerdar/vazir-font/v19.0.0/dist/font-face.css" rel="stylesheet" type="text/css" />
    <style type="text/css">*,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    body {
        font-family: Vazir, Tahoma, Arial, sans-serif;
        font-weight: 300;
        font-size: 16px;
        padding: 0;
        margin: 0;
        color: #000000;
        background: #fff;
        height: 100%;
        position: relative;
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        -ms-overflow-style: scrollbar;
        overflow-x: hidden;
    }

    .container {
        width: 100%;
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto
    }

    @media (min-width: 576px) {
        .container {
            max-width: 540px
        }
    }

    @media (min-width: 768px) {
        .container {
            max-width: 720px
        }
    }

    @media (min-width: 992px) {
        .container {
            max-width: 960px
        }
    }

    @media (min-width: 1200px) {
        .container {
            max-width: 1140px
        }
    }

    .row {
        display: flex;
        flex-wrap: wrap;
        margin-right: -15px;
        margin-left: -15px;
    }

    @media screen and (max-width: 768px) {
        body {
            font-size: 14px;
            line-height: 1.5;
        }
    }

    a {
        -webkit-transition: 0.5s;
        -o-transition: 0.5s;
        transition: 0.5s;
        text-decoration: none;
    }

    a:hover,
    a:active,
    a:focus {
        color: #52d3aa;
        outline: none;
        text-decoration: none;
    }

    p {
        margin-bottom: 1.5em;
        text-align: right;
        line-height: 2;
    }

    pre {
        padding: 1.5em;
        color: #dbd8da;
        background: #2c3747;
        font-weight: 300;
        font-size: 16px;
        line-height: 1.2;
        overflow-x: auto;
        border-radius: 10px;
        box-shadow: 0px 4px 14px rgba(41, 55, 72, 0.4);
    }

    code {
        font-family: "Courier New", Courier, monospace;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: Vazir, Tahoma, Arial, sans-serif;
        color: #000;
        margin: 30px 0;
        text-align: right;
        position: relative
    }

    h3 {
        padding-right: 15px;
    }

    h4 {
        padding-right: 22px;
    }

    h1:first-child {
        color: #2c3747;
        font-size: 28px;
        border-bottom: 1px solid #bfbfbf;
        padding-bottom: 25px;
    }

    h3:after {
        content: '';
        display: block;
        width: 5px;
        height: 100%;
        background-color: #52d3aa;
        position: absolute;
        right: 0;
        top: 0;
        border-radius: 4px;
    }

    h4:after {
        content: '';
        display: block;
        width: 5px;
        height: 100%;
        background-color: #52d3aa;
        position: absolute;
        right: 0;
        top: 0;
        border-radius: 4px;
    }

    h4:before {
        content: '';
        display: block;
        width: 5px;
        height: 100%;
        background-color: #52d3aa;
        position: absolute;
        right: 6px;
        top: 0;
        border-radius: 4px;
    }

    ::-moz-selection {
        color: #fff;
        background: #52d3aa;
    }

    ::selection {
        color: #fff;
        background: #52d3aa;
    }

    @media screen and (max-width: 768px) {
        .table-responsive table {
            width: 100%;
            margin-bottom: 0;
        }

        .table-responsive {
            margin-bottom: 45px;
        }

        .row {
            margin-right: 0;
            margin-left: 0;
        }
    }

    table {
        border-radius: 5px;
        margin-bottom: 45px;
        border: 1px solid rgba(0, 0, 0, 0.17);
        transition: all ease 0.25S;
        background: #fff;
    }

    .table-responsive {
        overflow-x: auto
    }

    td,
    th {
        padding: 10px;
        background-color: #fff;
        border-bottom: 1px solid #dddddd;
        line-height: 1.5;
        font-size: 15px;
    }

    tr:last-child td {
        border-bottom: none;
    }

    tr td:first-child {
        background-color: #eee
    }

    .green tr td:first-child {
        background-color: #d4edda
    }

    .red tr td:first-child {
        background-color: #f8d7da
    }

    tr td:last-child {
        text-align: right;
        direction: rtl;
    }

    .info-note {
        background: #A5E4FB;
        padding: 17px;
        border-radius: 5px;
        border: 1px solid #03ABE8;
    }

    .success-note {
        background: #c1f0e4;
        padding: 17px;
        border-radius: 5px;
        border: 1px solid #5bad99;
    }

    .warning-note {
        background: #F9DC88;
        padding: 17px;
        border-radius: 5px;
        border: 1px solid #E59A04;
    }

    .error-note {
        background: #FACDCC;
        padding: 17px;
        border-radius: 5px;
        border: 1px solid #E80703;
    }

    .container {
        border-bottom: 1px solid #bfbfbf;
        padding-bottom: 25px;
    }

    .footer {

        text-align: center;
        padding: 20px;
    }
    </style>
</head>
<body>
<div class="container">
    <h3 dir="RTL">نصب<a href="http://rep.peykasa.ir/index.php?dir=%2FRelease-Repository%2FUI-Framework%2FAuth-Server/5.0.0" target="_blank"> auth-server</a></h3>

    <p dir="RTL">1-&nbsp;فایل مربوط به نصب<span dir="LTR">Auth-server</span> را دانلود کنید و بر طبق داکیومنت نصب آنرا نصب کنید.</p>

    <p dir="RTL">&nbsp; &nbsp; &nbsp; &nbsp;-&nbsp;در فرایند نصب<span dir="LTR">Auth Server</span>، نحوه ی ایجاد دیتابیس توضیح داده شده است.</p>

    <h3 dir="RTL">نصب <a href="https://rep.peykasa.ir/index.php?dir=%2FRelease-Repository%2FUI-Framework%2FAudit-Server/4.1.0" target="_blank">audit-server</a></h3>

    <p dir="RTL">1-&nbsp;فایل مربوط به نصب <span dir="LTR">Audit-server</span> را دانلود کنید و بر طبق داکیومنت نصب آنرا نصب کنید.</p>

    <p dir="RTL">2-&nbsp;فایل <span dir="LTR">permissions-audit.json&nbsp;</span>&nbsp;موجود در بسته&nbsp;<span dir="LTR">Audit-server</span> را می بایست با استفاده از ابزار <a href="https://rep.peykasa.ir/Release-Repository/UI-Framework/Auth-Server/permission-importer-user-guide.html">permission-importer.sh</a> که&nbsp;در auth-server وجود دارد ،پردازش کنید.&nbsp;با این کار دسترسیهای مربوط به سرویس <span dir="LTR">Audit-server</span> به دیتابیس <span dir="LTR">Auth-server</span>&nbsp;اضافه می شوند.</p>

    <h3 dir="RTL">نصب سرویس X</h3>

    <p dir="RTL">1-&nbsp;سرویس <span dir="LTR">x </span>&nbsp;&nbsp;را با توجه به داکیومنت آن نصب کنید.</p>

    <p dir="RTL">2-&nbsp;فایل<span dir="LTR">permissions-X.json&nbsp;</span>&nbsp;موجود در سرویس X&nbsp;را می بایست با استفاده از ابزار&nbsp;<a href="https://rep.peykasa.ir/Release-Repository/UI-Framework/Auth-Server/permission-importer-user-guide.html" style="transition-property: all;">permission-importer.sh</a>&nbsp;که&nbsp;در auth-server وجود دارد ،پردازش کنید.&nbsp;با این کار دسترسیهای مربوط به سرویس&nbsp;<span dir="LTR">X</span>&nbsp;به دیتابیس&nbsp;<span dir="LTR">Auth-server</span>&nbsp;اضافه می&nbsp; شوند.</p>

    <h3 dir="RTL">برقراری ارتباط بین Auth-server ، Audit-server و سرویس X</h3>

    <p dir="RTL">1-&nbsp;<span dir="RTL">در فایل پیکربندی سرویس Auth-server مقدار ویژگی app.audit.remote.dest باید به آدرس سرویس Audit-server اشاره کند.</span></p>

    <p dir="RTL"><span style="color:#FF0000;"><sup><sub>* در فایل پیکر بندی auth-server&nbsp;&nbsp;اگر مقدار ویژگی app.audit.remote.dest کامنت باشد یعنی اتصال به audit-server غیرفعال است.</sub></sup></span></p>

    <p dir="RTL">2- در فایل پیکربندی سرویس Audit-server مقدار ویژگی rs.securoty.auth.server.context.path باید به آدرس سرویس Auth-server اشاره کند.</p>

    <p dir="RTL">3- در فایل پیکربندی سرویس X ، باید ویژگی مربوط به&nbsp;اتصال به Auth-server ثبت شود.</p>

    <p dir="RTL">4- در فایل پیکربندی سرویس X ، باید ویژگی مربوط به اتصال به Audit-server ثبت شود.</p>

    <h3 dir="RTL">نصب UI سرویس X</h3>

    <p dir="RTL">1- فایل مربوط به نصب UI را دانلود کنید و در مسیری روی سرور قرار دهید.</p>

    <p dir="RTL">2- در فایل config.json در UI مقدار ویژگی API را به گونه ای تغییر دهید تا IP و port سرویس X را دارا باشد.</p>

    <p dir="RTL">3- در فایل config.json در UI مقدار ویژگی Auth&nbsp;را به گونه ای تغییر دهید تا IP و port سرویس Auth-server&nbsp;را دارا باشد.</p>

    <p dir="RTL">4-&nbsp;در فایل config.json در UI مقدار ویژگی Audit&nbsp;را به گونه ای تغییر دهید تا IP و port سرویس Audit-server&nbsp;را دارا باشد.</p>

    <h3 dir="RTL">نصب <a href="https://rep.peykasa.ir/index.php?dir=%2FRelease-Repository%2FUI-Framework%2FProxy-Server/1.2.0" target="_blank">Proxy server</a></h3>

    <p dir="RTL">1-&nbsp;فایل مربوط به نصب <span dir="LTR">&nbsp;Proxy-sever</span>را دانلود کنید و مطابق داکیومنت نصب آنرا نصب کنید.</p>

    <p dir="RTL">2-&nbsp;برای پیکربندی <span dir="LTR">Proxy-server</span> فرض می کنیم که سرویس های نصب شده در بالا در آدرس های زیر نصب باشند:</p>

    <p style="text-align: left;"><span dir="LTR"><em>Auth-server&nbsp;</em>: <span style="color:#FF0000;">http://localhost:8080/auth-server</span></span></p>

    <p style="text-align: left;"><span dir="LTR"><em>Audit-server&nbsp;</em>: <span style="color:#00cc00;">http://localhost:8081/audit-server</span></span></p>

    <p style="text-align: left;"><span dir="LTR"><em>X-server&nbsp;</em>: <span style="color:#0066ff;">http://localhost:8082/x-server</span></span></p>

    <p style="text-align: left;"><em>Path of UI Files&nbsp;</em>: <span style="color:#8B4513;">/usr/local/PeykAsa/x-ui</span></p>

    <p dir="RTL">در اینصورت باید مقادیر زیر در پیکربندی <span dir="LTR">Proxy-server</span> وجود داشته باشند:</p>

    <p dir="RTL">&nbsp;</p>

    <p style="text-align: left;"><strong>zuul.routes.x-server.path</strong>= <strong>/x-server/**</strong><br />
        <strong>zuul.routes.x-server.url</strong>= <span style="color: rgb(0, 102, 255);">http://localhost:8082/x-server/</span><br />
        <br />
        <strong>zuul.routes.auth-server.path</strong>= <strong>/auth-server/**</strong><br />
        <strong>zuul.routes.auth-server.url</strong>= <span style="color: rgb(255, 0, 0);">http://localhost:8080/auth-server/</span><br />
        <br />
        <strong>zuul.routes.audit-server.path</strong>= <strong>/audit-server/**</strong><br />
        <strong>zuul.routes.audit-server.url</strong>= <span style="color: rgb(0, 204, 0);">http://localhost:8081/audit-server/</span></p>

    <p style="text-align: left;"><strong>spring.resources.static-locations</strong>= file:<span style="color: rgb(139, 69, 19);">/usr/local/PeykAsa/x-ui/</span></p>
</div>
</body>
</html>
